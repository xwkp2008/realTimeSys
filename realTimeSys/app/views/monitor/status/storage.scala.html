@(jsonStr: String)
<div class="pageContent" layoutH="0">
	<div class="pageContent" layoutH="0" style="width:60%;display:block;float:left;">
		<div class="panel" minh="100">
			<h1>监控对象列表</h1>
			<div>
				<table id="objectList" class="list" width="100%">
					<thead>
						<tr>
							<th width="100" orderField="num">对象名</th>
							<th width="100">状态</th>
							<th width="100">运行时间</th>
							<th width="100">可用空间</th>
						</tr>
					</thead>
					<tbody>
						<tr target="sid_user" rel="1" class="selected">
							<td>A系统</td>
							<td style="color:green;">运行中</td>
							<td class="runtime">15天20小时31分19秒</td>
							<td>23.5GB</td>
						</tr>
						<tr target="sid_user" rel="2">
							<td>B系统</td>
							<td style="color:green;">运行中</td>
							<td class="runtime">9天7小时44分17秒</td>
							<td>6.67GB</td>
						</tr>
						<tr target="sid_user" rel="3">
							<td>C系统</td>
							<td style="color:red;">停止</td>
							<td></td>
							<td>3.5GB</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		<div class="panel" minh="100">
			<h1>硬盘空间列表</h1>
			<div>
				<table id="storageList" class="list" width="100%">
					<thead>
						<tr>
							<th width="100" orderField="num">空间名</th>
							<th width="100">块数</th>
							<th width="100">空间总数</th>
							<th width="100">可用空间</th>
							<th width="100">已用空间</th>
							<th width="100">使用率</th>
						</tr>
					</thead>
					<tbody>
						<tr target="sid_user" rel="1">
							<td>datadbs</td>
							<td>3.0</td>
							<td>39.1GB</td>
							<td>36.5GB</td>
							<td>2.55GB</td>
							<td style="color:green;">6.53%</td>
						</tr>
						<tr target="sid_user" rel="2">
							<td>logdbs</td>
							<td>1.0</td>
							<td>3.91GB</td>
							<td>2.00GB</td>
							<td>1.91GB</td>
							<td style="color:red;">48.83%</td>
						</tr>
						<tr target="sid_user" rel="3">
							<td>phydbs</td>
							<td>1.0</td>
							<td>1.95GB</td>
							<td>1.46GB</td>
							<td>500MB</td>
							<td style="color:green;">25.01%</td>
						</tr>
						<tr target="sid_user" rel="4">
							<td>rootdbs</td>
							<td>1.0</td>
							<td>1.95GB</td>
							<td>1.63GB</td>
							<td>331MB</td>
							<td style="color:green;">16.54%</td>
						</tr>
						<tr target="sid_user" rel="5">
							<td>sdstmdbs</td>
							<td>1.0</td>
							<td>1.91GB</td>
							<td>1.91GB</td>
							<td>424KB</td>
							<td style="color:green;">0.02%</td>
						</tr>
						<tr target="sid_user" rel="6">
							<td>tmpdbs</td>
							<td>1.0</td>
							<td>1.95GB</td>
							<td>1.95GB</td>
							<td>212KB</td>
							<td style="color:green;">0.01%</td>
						</tr>
					</tbody>
					
					<tbody style="display:none;">
						<tr target="sid_user" rel="1">
							<td>datadbs</td>
							<td>3.0</td>
							<td>39.1GB</td>
							<td>36.5GB</td>
							<td>2.55GB</td>
							<td style="color:green;">6.53%</td>
						</tr>
						<tr target="sid_user" rel="2">
							<td>logdbs</td>
							<td>1.0</td>
							<td>3.91GB</td>
							<td>2.00GB</td>
							<td>1.91GB</td>
							<td style="color:red;">48.83%</td>
						</tr>
						<tr target="sid_user" rel="3">
							<td>phydbs</td>
							<td>1.0</td>
							<td>1.95GB</td>
							<td>1.46GB</td>
							<td>500MB</td>
							<td style="color:green;">25.01%</td>
						</tr>
						<tr target="sid_user" rel="4">
							<td>rootdbs</td>
							<td>1.0</td>
							<td>1.95GB</td>
							<td>1.63GB</td>
							<td>331MB</td>
							<td style="color:green;">16.54%</td>
						</tr>
					</tbody>
					
					<tbody style="display:none;">
						<tr target="sid_user" rel="1">
							<td>datadbs</td>
							<td>3.0</td>
							<td>39.1GB</td>
							<td>36.5GB</td>
							<td>2.55GB</td>
							<td style="color:green;">6.53%</td>
						</tr>
						<tr target="sid_user" rel="2">
							<td>logdbs</td>
							<td>1.0</td>
							<td>3.91GB</td>
							<td>2.00GB</td>
							<td>1.91GB</td>
							<td style="color:red;">48.83%</td>
						</tr>
						<tr target="sid_user" rel="3">
							<td>phydbs</td>
							<td>1.0</td>
							<td>1.95GB</td>
							<td>1.46GB</td>
							<td>500MB</td>
							<td style="color:green;">25.01%</td>
						</tr>
						<tr target="sid_user" rel="4">
							<td>rootdbs</td>
							<td>1.0</td>
							<td>1.95GB</td>
							<td>1.63GB</td>
							<td>331MB</td>
							<td style="color:green;">16.54%</td>
						</tr>
						<tr target="sid_user" rel="5">
							<td>sdstmdbs</td>
							<td>1.0</td>
							<td>1.91GB</td>
							<td>1.91GB</td>
							<td>424KB</td>
							<td style="color:green;">0.02%</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
	<div class="pageContent" layoutH="0" style="width:40%;display:block;float: left;clear: none;">
		<div class="panel" minh="100">
			<h1>堆积图</h1>
			<div id="placeholderContainer" class="pageContent" layoutH="50">
				<div id="placeholder" style="height:450px;width:90%;padding:20px;10px;"></div>
			</div>
		</div>
	</div>
</div>

<script src="@routes.Assets.at("javascripts/flot/jquery.flot.stack.min.js")" type="text/javascript"></script>
<script type="text/javascript">
	var previousPoint = null, previousLabel = null;
	$.fn.UseTooltip = function () {
            $(this).bind("plothover", function (event, pos, item) {
                if (item) {
                    if ((previousLabel != item.series.label) ||
                 (previousPoint != item.dataIndex)) {
                        previousPoint = item.dataIndex;
                        previousLabel = item.series.label;
                        $("#tooltip").remove();
 
                        var x = item.datapoint[0] - item.datapoint[2];
                        var y = item.datapoint[1];
 
                        var color = item.series.color;
                        //alert(color)
                        //console.log(item.series.xaxis.ticks[x].label);               
 
                        showTooltip(item.pageX,
                        item.pageY,
                        color,
                        "<strong>" + item.series.label + "</strong><br>" + item.series.yaxis.ticks[y].label +
                        " : <strong>" + $.formatNumber(x, { format: "#.###", locale: "us" }) + "</strong> GB");
                    }
                } else {
                    $("#tooltip").remove();
                    previousPoint = null;
                }
            });
        };
        
    function showTooltip(x, y, color, contents) {
        $('<div id="tooltip">' + contents + '</div>').css({
            position: 'absolute',
            display: 'none',
            top: y - 10,
            left: x + 10,
            border: '2px solid ' + color,
            padding: '3px',
            'font-size': '9px',
            'border-radius': '5px',
            'background-color': '#fff',
            'font-family': 'Verdana, Arial, Helvetica, Tahoma, sans-serif',
            opacity: 0.9
        }).appendTo("body").fadeIn(200);
    }
    
	$(function() {
		var $box = navTab.getCurrentPanel();
 		var rawData0_0 = [[2.55, 5], [1.91, 4],[0.50, 3],[0.33, 2],[0.01, 1], [0.01, 0]];
		var rawData0_1 = [[36.5, 5], [2.00, 4],[1.46, 3],[1.63, 2],[1.91, 1], [1.95, 0]];
		
		var rawData1_0 = [[15.55, 3], [3.91, 2],[2.70, 1],[1.01, 0]];
		var rawData1_1 = [[22.5, 3], [8.00, 2],[0.46, 1],[0.93, 0]];
		
		var rawData2_0 = [[20.55, 4], [1.47, 3],[1.50, 2],[1.19, 1],[0.01, 0]];
		var rawData2_1 = [[18.5, 4], [1.53, 3],[0.46, 2],[0.81, 1],[1.91, 0]];
		
		var dataArr = [[rawData0_0,rawData0_1],[rawData1_0,rawData1_1],[rawData2_0,rawData2_1]];
		
        var dataSet = [{ label:"已用空间",data: dataArr[0][0], color:"#2ea4ff"},{ label:"可用空间", data: dataArr[0][1], color:"#9ed5ff"}];
        var ticks = [
        				[[0, "tmpdbs"], [1, "sdstmdbs"], [2, "rootdbs"], [3, "phydbs"], [4, "logdbs"],[5, "datadbs"]],
        				[[0, "rootdbs"], [1, "phydbs"], [2, "logdbs"],[3, "datadbs"]],
        				[[0, "sdstmdbs"], [1, "rootdbs"], [2, "phydbs"], [3, "logdbs"],[4, "datadbs"]]
        			];
        var options = {
            series: {
            	stack:true,
                bars: {
                    show: true
                }
            },
            bars: {
                align: "center",
                barWidth: 0.3,
                horizontal: true,
                fillColor: { colors: [{ opacity: 0.5 }, { opacity: 1}] },
                lineWidth: 1
            },
            xaxis: {
                axisLabel: "容量 (GB)",
                axisLabelUseCanvas: true,
                axisLabelFontSizePixels: 12,
                axisLabelFontFamily: 'Verdana, Arial',
                axisLabelPadding: 10,
                max: 40,
                tickFormatter: function (v, axis) {
                    return $.formatNumber(v, { format: "#,###", locale: "us" });
                },
                color: "black"
            },
            yaxis: {
                axisLabel: "空间名",
                axisLabelUseCanvas: true,
                axisLabelFontSizePixels: 12,
                axisLabelFontFamily: 'Verdana, Arial',
                axisLabelPadding: 2,
                ticks: ticks[0]
            },
            legend: {
                noColumns: 0,
                labelBoxBorderColor: "#858585",
                position: "ne"
            },
            grid: {
                hoverable: true,
                borderWidth: 2
            }
        };
		$.plot($("#placeholder", $box), dataSet, options);
        $("#placeholder", $box).UseTooltip();
        
        $("#objectList tbody tr", $box).click(function(){
        	var index = $(this).index();
        	$("#storageList tbody", $box).hide();
        	$("#storageList tbody", $box).eq(index).show();
        	dataSet = [{ label:"已用空间",data: dataArr[index][0], color:"#2ea4ff"},{ label:"可用空间", data: dataArr[index][1], color:"#9ed5ff"}];
        	options.yaxis.ticks = ticks[index];
        	$.plot($("#placeholder", $box), dataSet, options);
        });
	});
</script>